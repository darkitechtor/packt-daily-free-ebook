# Автоматизация получения ежедневной бесплатной электронной книги от Packtpub

> :warning: **Disclaimer**\
> Материал представлен исключительно в ознакомительных целях.\
> Я не призываю никого использовать данную автоматизацию на практике и не несу ответственности за возможную блокировку личного акккаунта Packtpub и иные последствия, вызванные ее использованием.

## Функционал
Скрипт авторизуется на сайте [Packtpub](https://www.packtpub.com/) под учетной записью пользователя, переходит на [страницу ежедневной раздачи](https://www.packtpub.com/free-learning) и добавляет книгу в библиотеку пользователя.</br>
Выполнение скрипта по расписанию управляется при помощи `crontab` или `Airflow`.

## Использованные технологии
- Python
- Bash
- Pyppeteer (библиотека веб-парсинга)
- Docker
- Airflow

## Содержимое репозитория
|Файл|Описание|
|-|-|
|**Запуск скрипта вручную**||
|[parser_script.py](parser_script.py)|Python-скрипт парсера, выполняющего необходимые действия.|
|[packt_parser_job.sh](packt_parser_job.sh)|Bash-скрипт, запускающий скрипт парсера.</br>Поскольку проект создавался в виртуальной среде python, bash-скрипт содержит и команду для ее активации.</br>Для автоматизации данный скрипт остается только запланировать в crontab.|
|[.conf](.conf)|Пример конфигурационного файла с логином и паролем пользователя.|
|**Автоматизация на Airflow**||
|[packt_parser_dag.py](airflow-docker/packt_parser_dag.py)|Даг Airflow для запуска парсера.|
|[parser_script.py](airflow-docker/src/parser_script.py)|Немного измененнный скрипт парсера для запуска через Airflow из контейнера Docker.</br>Изменено:</br>- Логин и пароль пользователя теперь лежат в Airflow Connections;</br>- Модифицированы параметры запуска браузера.|
|[Dockerfile](airflow-docker/Dockerfile)|Пример Dockerfile, подходящий для разворачивая Airflow на Raspberry Pi 4.|
|[entrypoint.sh](airflow-docker/entrypoint.sh)|Bash-скрипт, выполняемый при запуске контейнера с Airflow.|

## Планы по развитию
- На текущий момент скрипт выводит информацию о добавленной книге, но не сохраняет ее и не отправляет пользователю. В планах - настроить отправку этой информации на почту/в виде уведомления, откуда ее будет легко скопировать и вставить в нужный файл.
- Также планируется добавить информацию по автоматизации скрипта при помощи сервиса [ScrapeOps](https://scrapeops.io), специализирующегося на оркестрации парсеров.